<ion-content class="ion-padding">
  <!-- Botão para adicionar novo usuário -->
  <ion-button
    expand="block"
    color="primary"
    (click)="abrirModalAdicionarUsuario()"
  >
    <ion-icon name="person-add" slot="start"></ion-icon>
    Adicionar Usuário
  </ion-button>

  <!-- Tabela de usuários -->
  <ion-card>
    <ion-grid>
      <!-- Cabeçalho -->
      <ion-row class="header-row bordered-row">
        <ion-col class="bordered-col"><strong>Nome</strong></ion-col>
        <ion-col class="bordered-col"><strong>Cargo</strong></ion-col>
        <ion-col class="bordered-col"><strong>Permissões</strong></ion-col>
        <ion-col class="bordered-col"><strong>Ações</strong></ion-col>
      </ion-row>

      <!-- Linhas de dados -->
      <ion-row *ngFor="let user of usuarios" class="bordered-row">
        <ion-col class="bordered-col">{{ user.nome }}</ion-col>
        <ion-col class="bordered-col">{{ user.cargo }}</ion-col>
        <ion-col class="bordered-col">{{ user.permissao }}</ion-col>
        <ion-col class="bordered-col">
          <ion-button
            size="small"
            color="danger"
            fill="clear"
            (click)="onDeleteUser(user)"
          >
            <ion-icon name="trash" slot="icon-only"></ion-icon>
          </ion-button>
          <ion-button size="small" color="tertiary" fill="clear">
            <ion-icon name="pencil" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
</ion-content>

<ion-modal [isOpen]="mostrarModal" (didDismiss)="fecharModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar color="primary">
        <ion-title>Registrar Novo Usuário</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="fecharModal()">Fechar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding">
      <ion-item>
        <ion-label position="stacked">Nome</ion-label>
        <ion-input [(ngModel)]="novoUsuario.nome" required></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Email</ion-label>
        <ion-input
          type="email"
          [(ngModel)]="novoUsuario.email"
          required
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Senha</ion-label>
        <ion-input
          type="password"
          [(ngModel)]="novoUsuario.senha"
          required
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Telefone</ion-label>
        <ion-input [(ngModel)]="novoUsuario.telefone"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">CPF</ion-label>
        <ion-input [(ngModel)]="novoUsuario.cpf"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Data de Admissão</ion-label>
        <ion-datetime
          display-format="DD/MM/YYYY"
          [(ngModel)]="novoUsuario.dataAdmissao"
        ></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Cargo</ion-label>
        <ion-input [(ngModel)]="novoUsuario.cargo"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Permissão</ion-label>
        <ion-select [(ngModel)]="novoUsuario.permissao" interface="popover">
          <ion-select-option value="Usuário de campo"
            >Usuário de campo</ion-select-option
          >
          <ion-select-option value="Gerente">Gerente</ion-select-option>
          <ion-select-option value="Diretor">Diretor</ion-select-option>
          <ion-select-option value="Administrador"
            >Administrador</ion-select-option
          >
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Está ativo?</ion-label>
        <ion-toggle [(ngModel)]="novoUsuario.isAtivo"></ion-toggle>
      </ion-item>

      <ion-button expand="full" color="success" (click)="onCreateUser()"
        >Salvar</ion-button
      >
    </ion-content>
  </ng-template>
</ion-modal>
